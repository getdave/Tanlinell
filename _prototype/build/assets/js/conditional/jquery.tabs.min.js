(function(e){function n(e,n){if(t&&window.console&&window.console.log){if(n){window.console.log(n+": ",e)}else{window.console.log(e)}}}var t=true;e.fn.extend({getUniqueId:function(e,t,n){if(n===undefined){n=""}else{n="-"+n}return e+t+n},accessibleTabs:function(t){var r={wrapperClass:"content",currentClass:"current",tabhead:"h4",tabheadClass:"tabhead",tabbody:".tabbody",fx:"show",fxspeed:"normal",currentInfoText:"current tab: ",currentInfoPosition:"prepend",currentInfoClass:"current-info",tabsListClass:"tabs-list",syncheights:false,syncHeightMethodName:"syncHeight",cssClassAvailable:false,saveState:false,autoAnchor:false,pagination:false,position:"top",wrapInnerNavLinks:"",firstNavItemClass:"first",lastNavItemClass:"last",clearfixClass:"clearfix"};var i={37:-1,38:-1,39:+1,40:+1};var s={top:"prepend",bottom:"append"};this.options=e.extend(r,t);var o=0;if(e("body").data("accessibleTabsCount")!==undefined){o=e("body").data("accessibleTabsCount")}e("body").data("accessibleTabsCount",this.size()+o);var u=this;return this.each(function(t){var r=e(this);var a="";var f=0;var l=[];e(r).wrapInner('<div class="'+u.options.wrapperClass+'"></div>');e(r).find(u.options.tabhead).each(function(n){var r="";var i=e(this).attr("id");if(i){if(i.indexOf("accessibletabscontent")===0){return}r=' id="'+i+'"'}var s=u.getUniqueId("accessibletabscontent",o+t,n);var c=u.getUniqueId("accessibletabsnavigation",o+t,n);l.push(s);if(u.options.cssClassAvailable===true){var h="";if(e(this).attr("class")){h=e(this).attr("class");h=' class="'+h+'"'}a+='<li id="'+c+'"><a'+r+""+h+' href="#'+s+'">'+e(this).html()+"</a></li>"}else{a+='<li id="'+c+'"><a'+r+' href="#'+s+'">'+e(this).html()+"</a></li>"}e(this).attr({id:s,"class":u.options.tabheadClass,tabindex:"-1"});f++});if(u.options.syncheights&&e.fn[u.options.syncHeightMethodName]){e(r).find(u.options.tabbody)[u.options.syncHeightMethodName]();e(window).resize(function(){e(r).find(u.options.tabbody)[u.options.syncHeightMethodName]()})}var c="."+u.options.tabsListClass;if(!e(r).find(c).length){e(r)[s[u.options.position]]('<ul class="'+u.options.clearfixClass+" "+u.options.tabsListClass+" tabamount"+f+'"></ul>')}e(r).find(c).append(a);var h=e(r).find(u.options.tabbody);if(h.length>0){e(h).hide();e(h[0]).show()}e(r).find("ul."+u.options.tabsListClass+">li:first").addClass(u.options.currentClass).addClass(u.options.firstNavItemClass).find("a")[u.options.currentInfoPosition]('<span class="'+u.options.currentInfoClass+'">'+u.options.currentInfoText+"</span>").parents("ul."+u.options.tabsListClass).children("li:last").addClass(u.options.lastNavItemClass);if(u.options.wrapInnerNavLinks){e(r).find("ul."+u.options.tabsListClass+">li>a").wrapInner(u.options.wrapInnerNavLinks)}e(r).find("ul."+u.options.tabsListClass+">li>a").each(function(t){e(this).click(function(n){n.preventDefault();r.trigger("showTab.accessibleTabs",[e(n.target)]);if(u.options.saveState&&e.cookie){e.cookie("accessibletab_"+r.attr("id")+"_active",t)}e(r).find("ul."+u.options.tabsListClass+">li."+u.options.currentClass).removeClass(u.options.currentClass).find("span."+u.options.currentInfoClass).remove();e(this).blur();e(r).find(u.options.tabbody+":visible").hide();e(r).find(u.options.tabbody).eq(t)[u.options.fx](u.options.fxspeed);e(this)[u.options.currentInfoPosition]('<span class="'+u.options.currentInfoClass+'">'+u.options.currentInfoText+"</span>").parent().addClass(u.options.currentClass);e(e(this).attr("href")).focus().keyup(function(n){if(i[n.keyCode]){u.showAccessibleTab(t+i[n.keyCode]);e(this).unbind("keyup")}})});e(this).focus(function(){e(document).keyup(function(e){if(i[e.keyCode]){u.showAccessibleTab(t+i[e.keyCode])}})});e(this).blur(function(){e(document).unbind("keyup")})});if(u.options.saveState&&e.cookie){var p=e.cookie("accessibletab_"+r.attr("id")+"_active");n(e.cookie("accessibletab_"+r.attr("id")+"_active"));if(p!==null){u.showAccessibleTab(p,r.attr("id"))}}if(u.options.autoAnchor&&window.location.hash){var d=e("."+u.options.tabsListClass).find(window.location.hash);if(d.size()){d.click()}}if(u.options.pagination){var v='<ul class="pagination">';v+='    <li class="previous"><a href="#{previousAnchor}"><span>{previousHeadline}</span></a></li>';v+='    <li class="next"><a href="#{nextAnchor}"><span>{nextHeadline}</span></a></li>';v+="</ul>";var m=e(r).find(".tabbody");var g=m.size();m.each(function(t){e(this).append(v);var n=t+1;if(n>=g){n=0}var i=t-1;if(i<0){i=g-1}var s=e(this).find(".pagination");var o=s.find(".previous");o.find("span").text(e("#"+l[i]).text());o.find("a").attr("href","#"+l[i]).click(function(t){t.preventDefault();e(r).find(".tabs-list a").eq(i).click()});var u=s.find(".next");u.find("span").text(e("#"+l[n]).text());u.find("a").attr("href","#"+l[n]).click(function(t){t.preventDefault();e(r).find(".tabs-list a").eq(n).click()})})}})},showAccessibleTab:function(t,r){n("showAccessibleTab");var i=this;if(r){var s=e("#"+r);var o=s.find("ul."+i.options.tabsListClass+">li>a");s.trigger("showTab.accessibleTabs",[o.eq(t)]);o.eq(t).click()}else{return this.each(function(){var n=e(this);n.trigger("showTab.accessibleTabs");var r=n.find("ul."+i.options.tabsListClass+">li>a");n.trigger("showTab.accessibleTabs",[r.eq(t)]);r.eq(t).click()})}},showAccessibleTabSelector:function(t){n("showAccessibleTabSelector");var r=e(t);if(r){if(r.get(0).nodeName.toLowerCase()==="a"){r.click()}else{n("the selector of a showAccessibleTabSelector() call needs to point to a tabs headline!")}}}})})(jQuery)